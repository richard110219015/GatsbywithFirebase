{"version":3,"sources":["webpack:///./src/pages/index.js","webpack:///./src/components/Firebase/firebase.js","webpack:///./src/components/Firebase/context.js","webpack:///./src/components/Firebase/index.js","webpack:///./src/components/Session/context.js","webpack:///./src/components/Session/withAuthentication.js","webpack:///./.cache/gatsby-browser-entry.js","webpack:///./src/constants/routes.js","webpack:///./.cache/public-page-renderer.js","webpack:///./src/components/Session/withAuthorization.js","webpack:///./src/components/Session/withEmailVerification.js","webpack:///./src/components/Session/index.js","webpack:///./src/constants/roles.js","webpack:///./.cache/public-page-renderer-prod.js","webpack:///./src/components/SignOut/index.js","webpack:///./src/components/Navigation/index.js","webpack:///./src/components/layout.js"],"names":["LandingPage","react__WEBPACK_IMPORTED_MODULE_0___default","a","createElement","react__WEBPACK_IMPORTED_MODULE_0__","LayoutWithMessenger","_React$Component","apply","this","arguments","_proto","prototype","componentDidMount","d","s","id","js","fjs","window","fbAsyncInit","FB","init","xfbml","version","document","getElementsByTagName","getElementById","src","parentNode","insertBefore","render","dangerouslySetInnerHTML","__html","React","Component","__webpack_exports__","_components_layout__WEBPACK_IMPORTED_MODULE_1__","firebase","FirebaseContext","createContext","withFirebase","props","react_default","Consumer","Object","assign","config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","Firebase","app","_this","doCreateUserWithEmailAndPassword","email","password","auth","createUserWithEmailAndPassword","doSignInWithEmailAndPassword","signInWithEmailAndPassword","doSignInWithGoogle","signInWithPopup","googleProvider","doSignInWithFacebook","facebookProvider","doSignInWithTwitter","twitterProvider","doSignOut","signOut","doPasswordReset","sendPasswordResetEmail","doSendEmailVerification","currentUser","sendEmailVerification","url","process","GATSBY_CONFIRMATION_EMAIL_REDIRECT","doPasswordUpdate","updatePassword","onAuthUserListener","next","fallback","onAuthStateChanged","authUser","user","uid","once","then","snapshot","dbUser","val","roles","emailVerified","providerData","db","ref","users","message","messages","initializeApp","serverValue","database","ServerValue","emailAuthProvider","EmailAuthProvider","GoogleAuthProvider","FacebookAuthProvider","TwitterAuthProvider","getFirebase","__webpack_require__","context","context_withFirebase","AuthUserContext","n","withAuthentication","WithAuthentication","call","_initFirebase","firebaseInit","listener","localStorage","setItem","JSON","stringify","setState","removeItem","state","parse","getItem","componentDidUpdate","componentWillUnmount","_context__WEBPACK_IMPORTED_MODULE_1__","Provider","value","gatsby_link__WEBPACK_IMPORTED_MODULE_1__","gatsby_link__WEBPACK_IMPORTED_MODULE_1___default","loader","enqueue","LANDING","SIGN_UP","SIGN_IN","HOME","ACCOUNT","PASSWORD_FORGET","ADMIN","m","module","exports","require","default","withAuthorization","condition","WithAuthorization","_len","length","args","Array","_key","concat","navigate","ROUTES","_this2","withEmailVerification","WithEmailVerification","onSendEmailVerification","isSent","map","provider","providerId","includes","needsEmailVerification","type","onClick","disabled","Session_withAuthorization","Session_withEmailVerification","ProdPageRenderer","_ref","location","pageResources","InternalPageRenderer","json","NavigationAuth","gatsby_browser_entry","to","ROLES","SignOut","NavigationNonAuth","Navigation","Session","Navigation_NavigationAuth","Navigation_NavigationNonAuth","Layout","Promise","all","e","t","bind","values","AppWithAuthentication","children","react","components_Navigation"],"mappings":"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","file":"component---src-pages-index-js-4f35bd13e43e5c514098.js","sourcesContent":["import React, { Fragment } from 'react';\r\n\r\nimport Layout from '../components/layout';\r\nimport { renderComponent } from 'recompose';\r\n\r\n\r\nconst LandingPage = () => (\r\n  <Fragment>\r\n    <h1>Landing</h1>\r\n    <p>\r\n      The Landing Page is open to everyone, even though the user isn't\r\n      signed in..\r\n    </p>\r\n  </Fragment>\r\n);\r\n\r\nexport class LayoutWithMessenger extends React.Component{\r\n  componentDidMount(){\r\n    window.fbAsyncInit = function() {\r\n      FB.init({\r\n        xfbml            : true,\r\n        version          : 'v4.0'\r\n      });\r\n    };\r\n  \r\n    (function(d, s, id) {\r\n      var js, fjs = d.getElementsByTagName(s)[0];\r\n      if (d.getElementById(id)) return;\r\n      js = d.createElement(s); js.id = id;\r\n      js.src = 'https://connect.facebook.net/zh_TW/sdk/xfbml.customerchat.js';\r\n      fjs.parentNode.insertBefore(js, fjs);\r\n    }(document, 'script', 'facebook-jssdk'));\r\n  }\r\n  render(){\r\n    return <Fragment>\r\n        <div id=\"fb-root\"></div>\r\n         <div dangerouslySetInnerHTML={{ __html: `<div class=\"fb-customerchat\"\r\n          attribution=install_email\r\n          page_id=\"722716767876424\"\r\n          theme_color=\"#6699cc\">\r\n        </div>` }} />\r\n      </Fragment>\r\n  }\r\n}\r\n\r\nexport default () => (\r\n  <Layout>\r\n    <LandingPage />\r\n    <LayoutWithMessenger />\r\n    <div dangerouslySetInnerHTML={{ __html: `<strong>ya~~~</strong>` }} />\r\n  </Layout>\r\n);\r\n\r\n","const config = {\r\n  apiKey: \"AIzaSyCi6P1abcy72QaTwfV7ZQHczpsJo6wOzvw\",\r\n  authDomain: \"gatsbyfb-8e6d6.firebaseapp.com\",\r\n  databaseURL: \"https://gatsbyfb-8e6d6.firebaseio.com\",\r\n  projectId: \"gatsbyfb-8e6d6\",\r\n  storageBucket: \"\",\r\n  messagingSenderId: \"921327650405\",\r\n  appId: \"1:921327650405:web:e247fd630bfd6e9a\"\r\n};\r\n\r\nclass Firebase {\r\n  constructor(app) {\r\n    app.initializeApp(config);\r\n\r\n    /* Helper */\r\n\r\n    this.serverValue = app.database.ServerValue;\r\n    this.emailAuthProvider = app.auth.EmailAuthProvider;\r\n\r\n    /* Firebase APIs */\r\n\r\n    this.auth = app.auth();\r\n    this.db = app.database();\r\n\r\n    /* Social Sign In Method Provider */\r\n\r\n    this.googleProvider = new app.auth.GoogleAuthProvider();\r\n    this.facebookProvider = new app.auth.FacebookAuthProvider();\r\n    this.twitterProvider = new app.auth.TwitterAuthProvider();\r\n  }\r\n\r\n  // *** Auth API ***\r\n\r\n  doCreateUserWithEmailAndPassword = (email, password) =>\r\n    this.auth.createUserWithEmailAndPassword(email, password);\r\n\r\n  doSignInWithEmailAndPassword = (email, password) =>\r\n    this.auth.signInWithEmailAndPassword(email, password);\r\n\r\n  doSignInWithGoogle = () =>\r\n    this.auth.signInWithPopup(this.googleProvider);\r\n\r\n  doSignInWithFacebook = () =>\r\n    this.auth.signInWithPopup(this.facebookProvider);\r\n\r\n  doSignInWithTwitter = () =>\r\n    this.auth.signInWithPopup(this.twitterProvider);\r\n\r\n  doSignOut = () => this.auth.signOut();\r\n\r\n  doPasswordReset = email => this.auth.sendPasswordResetEmail(email);\r\n\r\n  doSendEmailVerification = () =>\r\n    this.auth.currentUser.sendEmailVerification({\r\n      url: process.env.GATSBY_CONFIRMATION_EMAIL_REDIRECT,\r\n    });\r\n\r\n  doPasswordUpdate = password =>\r\n    this.auth.currentUser.updatePassword(password);\r\n\r\n  // *** Merge Auth and DB User API *** //\r\n\r\n  onAuthUserListener = (next, fallback) =>\r\n    this.auth.onAuthStateChanged(authUser => {\r\n      if (authUser) {\r\n        this.user(authUser.uid)\r\n          .once('value')\r\n          .then(snapshot => {\r\n            const dbUser = snapshot.val();\r\n\r\n            // default empty roles\r\n            if (!dbUser.roles) {\r\n              dbUser.roles = {};\r\n            }\r\n\r\n            // merge auth and db user\r\n            authUser = {\r\n              uid: authUser.uid,\r\n              email: authUser.email,\r\n              emailVerified: authUser.emailVerified,\r\n              providerData: authUser.providerData,\r\n              ...dbUser,\r\n            };\r\n\r\n            next(authUser);\r\n          });\r\n      } else {\r\n        fallback();\r\n      }\r\n    });\r\n\r\n  // *** User API ***\r\n\r\n  user = uid => this.db.ref(`users/${uid}`);\r\n\r\n  users = () => this.db.ref('users');\r\n\r\n  // *** Message API ***\r\n\r\n  message = uid => this.db.ref(`messages/${uid}`);\r\n\r\n  messages = () => this.db.ref('messages');\r\n}\r\n\r\nlet firebase;\r\n\r\nfunction getFirebase(app, auth, database) {\r\n  if (!firebase) {\r\n    firebase = new Firebase(app, auth, database);\r\n  }\r\n\r\n  return firebase;\r\n}\r\n\r\nexport default getFirebase;\r\n","import React from 'react';\r\n\r\nconst FirebaseContext = React.createContext(null);\r\n\r\nexport const withFirebase = Component => props => (\r\n  <FirebaseContext.Consumer>\r\n    {firebase => <Component {...props} firebase={firebase} />}\r\n  </FirebaseContext.Consumer>\r\n);\r\n\r\nexport default FirebaseContext;\r\n","import FirebaseContext, { withFirebase } from './context';\r\nimport getFirebase from './firebase';\r\n\r\nexport default getFirebase;\r\n\r\nexport { FirebaseContext, withFirebase };\r\n","import React from 'react';\r\n\r\nconst AuthUserContext = React.createContext(null);\r\n\r\nexport default AuthUserContext;\r\n","import React from 'react';\r\n\r\nimport AuthUserContext from './context';\r\nimport { withFirebase } from '../Firebase';\r\n\r\nconst withAuthentication = Component => {\r\n  class WithAuthentication extends React.Component {\r\n    _initFirebase = false;\r\n\r\n    constructor(props) {\r\n      super(props);\r\n\r\n      this.state = {\r\n        authUser: null,\r\n      };\r\n    }\r\n\r\n    firebaseInit = () => {\r\n      if (this.props.firebase && !this._initFirebase) {\r\n        this._initFirebase = true;\r\n\r\n        this.listener = this.props.firebase.onAuthUserListener(\r\n          authUser => {\r\n            localStorage.setItem(\r\n              'authUser',\r\n              JSON.stringify(authUser),\r\n            );\r\n            this.setState({ authUser });\r\n          },\r\n          () => {\r\n            localStorage.removeItem('authUser');\r\n            this.setState({ authUser: null });\r\n          },\r\n        );\r\n      }\r\n    };\r\n\r\n    componentDidMount() {\r\n      this.setState({\r\n        authUser: JSON.parse(localStorage.getItem('authUser')),\r\n      });\r\n\r\n      this.firebaseInit();\r\n    }\r\n\r\n    componentDidUpdate() {\r\n      this.firebaseInit();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n      this.listener && this.listener();\r\n    }\r\n\r\n    render() {\r\n      return (\r\n        <AuthUserContext.Provider value={this.state.authUser}>\r\n          <Component {...this.props} />\r\n        </AuthUserContext.Provider>\r\n      );\r\n    }\r\n  }\r\n\r\n  return withFirebase(WithAuthentication);\r\n};\r\n\r\nexport default withAuthentication;\r\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport Link, {\n  withPrefix,\n  withAssetPrefix,\n  navigate,\n  push,\n  replace,\n  navigateTo,\n  parsePath,\n} from \"gatsby-link\"\nimport PageRenderer from \"./public-page-renderer\"\nimport loader from \"./loader\"\n\nconst prefetchPathname = loader.enqueue\n\nconst StaticQueryContext = React.createContext({})\n\nfunction StaticQueryDataRenderer({ staticQueryData, data, query, render }) {\n  const finalData = data\n    ? data.data\n    : staticQueryData[query] && staticQueryData[query].data\n\n  return (\n    <React.Fragment>\n      {finalData && render(finalData)}\n      {!finalData && <div>Loading (StaticQuery)</div>}\n    </React.Fragment>\n  )\n}\n\nconst StaticQuery = props => {\n  const { data, query, render, children } = props\n\n  return (\n    <StaticQueryContext.Consumer>\n      {staticQueryData => (\n        <StaticQueryDataRenderer\n          data={data}\n          query={query}\n          render={render || children}\n          staticQueryData={staticQueryData}\n        />\n      )}\n    </StaticQueryContext.Consumer>\n  )\n}\n\nconst useStaticQuery = query => {\n  if (\n    typeof React.useContext !== `function` &&\n    process.env.NODE_ENV === `development`\n  ) {\n    throw new Error(\n      `You're likely using a version of React that doesn't support Hooks\\n` +\n        `Please update React and ReactDOM to 16.8.0 or later to use the useStaticQuery hook.`\n    )\n  }\n  const context = React.useContext(StaticQueryContext)\n  if (context[query] && context[query].data) {\n    return context[query].data\n  } else {\n    throw new Error(\n      `The result of this StaticQuery could not be fetched.\\n\\n` +\n        `This is likely a bug in Gatsby and if refreshing the page does not fix it, ` +\n        `please open an issue in https://github.com/gatsbyjs/gatsby/issues`\n    )\n  }\n}\n\nStaticQuery.propTypes = {\n  data: PropTypes.object,\n  query: PropTypes.string.isRequired,\n  render: PropTypes.func,\n  children: PropTypes.func,\n}\n\nfunction graphql() {\n  throw new Error(\n    `It appears like Gatsby is misconfigured. Gatsby related \\`graphql\\` calls ` +\n      `are supposed to only be evaluated at compile time, and then compiled away. ` +\n      `Unfortunately, something went wrong and the query was left in the compiled code.\\n\\n` +\n      `Unless your site has a complex or custom babel/Gatsby configuration this is likely a bug in Gatsby.`\n  )\n}\n\nexport {\n  Link,\n  withAssetPrefix,\n  withPrefix,\n  graphql,\n  parsePath,\n  navigate,\n  push, // TODO replace for v3\n  replace, // TODO remove replace for v3\n  navigateTo, // TODO: remove navigateTo for v3\n  StaticQueryContext,\n  StaticQuery,\n  PageRenderer,\n  useStaticQuery,\n  prefetchPathname,\n}\n","export const LANDING = '/';\r\nexport const SIGN_UP = '/signup';\r\nexport const SIGN_IN = '/signin';\r\nexport const HOME = '/home';\r\nexport const ACCOUNT = '/account';\r\nexport const PASSWORD_FORGET = '/pw-forget';\r\nexport const ADMIN = '/admin';\r\nexport const ADMIN_DETAILS = '/admin/:id';\r\n","const preferDefault = m => (m && m.default) || m\n\nif (process.env.BUILD_STAGE === `develop`) {\n  module.exports = preferDefault(require(`./public-page-renderer-dev`))\n} else if (process.env.BUILD_STAGE === `build-javascript`) {\n  module.exports = preferDefault(require(`./public-page-renderer-prod`))\n} else {\n  module.exports = () => null\n}\n","import React from 'react';\r\nimport { navigate } from 'gatsby';\r\n\r\nimport AuthUserContext from './context';\r\nimport { withFirebase } from '../Firebase';\r\nimport * as ROUTES from '../../constants/routes';\r\n\r\nconst withAuthorization = condition => Component => {\r\n  class WithAuthorization extends React.Component {\r\n    _initFirebase = false;\r\n\r\n    firebaseInit = () => {\r\n      if (this.props.firebase && !this._initFirebase) {\r\n        this._initFirebase = true;\r\n\r\n        this.listener = this.props.firebase.onAuthUserListener(\r\n          authUser => {\r\n            if (!condition(authUser)) {\r\n              navigate(ROUTES.SIGN_IN);\r\n            }\r\n          },\r\n          () => navigate(ROUTES.SIGN_IN),\r\n        );\r\n      }\r\n    };\r\n\r\n    componentDidMount() {\r\n      this.firebaseInit();\r\n    }\r\n\r\n    componentDidUpdate() {\r\n      this.firebaseInit();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n      this.listener && this.listener();\r\n    }\r\n\r\n    render() {\r\n      return (\r\n        <AuthUserContext.Consumer>\r\n          {authUser =>\r\n            condition(authUser) ? <Component {...this.props} /> : null\r\n          }\r\n        </AuthUserContext.Consumer>\r\n      );\r\n    }\r\n  }\r\n\r\n  return withFirebase(WithAuthorization);\r\n};\r\n\r\nexport default withAuthorization;\r\n","import React from 'react';\r\n\r\nimport AuthUserContext from './context';\r\nimport { withFirebase } from '../Firebase';\r\n\r\nconst needsEmailVerification = authUser =>\r\n  authUser &&\r\n  !authUser.emailVerified &&\r\n  authUser.providerData\r\n    .map(provider => provider.providerId)\r\n    .includes('password');\r\n\r\nconst withEmailVerification = Component => {\r\n  class WithEmailVerification extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n\r\n      this.state = { isSent: false };\r\n    }\r\n\r\n    onSendEmailVerification = () => {\r\n      this.props.firebase\r\n        .doSendEmailVerification()\r\n        .then(() => this.setState({ isSent: true }));\r\n    };\r\n\r\n    render() {\r\n      return (\r\n        <AuthUserContext.Consumer>\r\n          {authUser =>\r\n            needsEmailVerification(authUser) ? (\r\n              <div>\r\n                {this.state.isSent ? (\r\n                  <p>\r\n                    E-Mail confirmation sent: Check you E-Mails (Spam\r\n                    folder included) for a confirmation E-Mail.\r\n                    Refresh this page once you confirmed your E-Mail.\r\n                  </p>\r\n                ) : (\r\n                  <p>\r\n                    Verify your E-Mail: Check you E-Mails (Spam folder\r\n                    included) for a confirmation E-Mail or send\r\n                    another confirmation E-Mail.\r\n                  </p>\r\n                )}\r\n\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={this.onSendEmailVerification}\r\n                  disabled={this.state.isSent}\r\n                >\r\n                  Send confirmation E-Mail\r\n                </button>\r\n              </div>\r\n            ) : (\r\n              <Component {...this.props} />\r\n            )\r\n          }\r\n        </AuthUserContext.Consumer>\r\n      );\r\n    }\r\n  }\r\n\r\n  return withFirebase(WithEmailVerification);\r\n};\r\n\r\nexport default withEmailVerification;\r\n","import AuthUserContext from './context';\r\nimport withAuthentication from './withAuthentication';\r\nimport withAuthorization from './withAuthorization';\r\nimport withEmailVerification from './withEmailVerification';\r\n\r\nexport {\r\n  AuthUserContext,\r\n  withAuthentication,\r\n  withAuthorization,\r\n  withEmailVerification,\r\n};\r\n","export const ADMIN = 'ADMIN';\r\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\n\nimport InternalPageRenderer from \"./page-renderer\"\n\nconst ProdPageRenderer = ({ location, pageResources }) => {\n  if (!pageResources) {\n    return null\n  }\n  return React.createElement(InternalPageRenderer, {\n    location,\n    pageResources,\n    ...pageResources.json,\n  })\n}\n\nProdPageRenderer.propTypes = {\n  location: PropTypes.shape({\n    pathname: PropTypes.string.isRequired,\n  }).isRequired,\n}\n\nexport default ProdPageRenderer\n","import React from 'react';\r\n\r\nimport { withFirebase } from '../Firebase';\r\n\r\nconst SignOutButton = ({ firebase }) => (\r\n  <button\r\n    type=\"button\"\r\n    onClick={firebase ? firebase.doSignOut : () => {}}\r\n  >\r\n    Sign Out\r\n  </button>\r\n);\r\n\r\nexport default withFirebase(SignOutButton);\r\n","import React from 'react';\r\nimport { Link } from 'gatsby';\r\n\r\nimport { AuthUserContext } from '../Session';\r\nimport SignOutButton from '../SignOut';\r\nimport * as ROUTES from '../../constants/routes';\r\nimport * as ROLES from '../../constants/roles';\r\n\r\nconst Navigation = () => (\r\n  <AuthUserContext.Consumer>\r\n    {authUser =>\r\n      authUser ? (\r\n        <NavigationAuth authUser={authUser} />\r\n      ) : (\r\n        <NavigationNonAuth />\r\n      )\r\n    }\r\n  </AuthUserContext.Consumer>\r\n);\r\n\r\nconst NavigationAuth = ({ authUser }) => (\r\n  <ul>\r\n    <li>\r\n      <Link to={ROUTES.LANDING}>Landing</Link>\r\n    </li>\r\n    <li>\r\n      <Link to={ROUTES.HOME}>Home</Link>\r\n    </li>\r\n    <li>\r\n      <Link to={ROUTES.ACCOUNT}>Account</Link>\r\n    </li>\r\n    {!!authUser.roles[ROLES.ADMIN] && (\r\n      <li>\r\n        <Link to={ROUTES.ADMIN}>Admin</Link>\r\n      </li>\r\n    )}\r\n    <li>\r\n      <SignOutButton />\r\n    </li>\r\n  </ul>\r\n);\r\n\r\nconst NavigationNonAuth = () => (\r\n  <ul>\r\n    <li>\r\n      <Link to={ROUTES.LANDING}>Landing</Link>\r\n    </li>\r\n    <li>\r\n      <Link to={ROUTES.SIGN_IN}>Sign In</Link>\r\n    </li>\r\n  </ul>\r\n);\r\n\r\nexport default Navigation;\r\n","import React, { Component, Fragment } from 'react';\r\n\r\nimport Navigation from './Navigation';\r\nimport getFirebase, { FirebaseContext } from './Firebase';\r\nimport withAuthentication from './Session/withAuthentication';\r\n\r\nclass Layout extends Component {\r\n  state = {\r\n    firebase: null,\r\n  };\r\n\r\n  componentDidMount() {\r\n    const app = import('firebase/app');\r\n    const auth = import('firebase/auth');\r\n    const database = import('firebase/database');\r\n\r\n    Promise.all([app, auth, database]).then(values => {\r\n      const firebase = getFirebase(values[0]);\r\n\r\n      this.setState({ firebase });\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <FirebaseContext.Provider value={this.state.firebase}>\r\n        <AppWithAuthentication {...this.props} />\r\n      </FirebaseContext.Provider>\r\n    );\r\n  }\r\n}\r\n\r\nconst AppWithAuthentication = withAuthentication(({ children }) => (\r\n  <Fragment>\r\n    <Navigation />\r\n    <hr />\r\n    {children}\r\n  </Fragment>\r\n));\r\n\r\nexport default Layout;\r\n"],"sourceRoot":""}