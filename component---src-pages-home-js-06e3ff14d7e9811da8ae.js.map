{"version":3,"sources":["webpack:///./src/components/Messages/MessageItem.js","webpack:///./src/components/Messages/MessageList.js","webpack:///./src/components/Messages/Messages.js","webpack:///./src/components/Messages/index.js","webpack:///./src/pages/home.js","webpack:///./src/components/Firebase/firebase.js","webpack:///./src/components/Firebase/context.js","webpack:///./src/components/Firebase/index.js","webpack:///./src/components/Session/context.js","webpack:///./src/components/Session/withAuthentication.js","webpack:///./.cache/gatsby-browser-entry.js","webpack:///./src/constants/routes.js","webpack:///./.cache/public-page-renderer.js","webpack:///./src/components/Session/withAuthorization.js","webpack:///./src/components/Session/withEmailVerification.js","webpack:///./src/components/Session/index.js","webpack:///./src/constants/roles.js","webpack:///./.cache/public-page-renderer-prod.js","webpack:///./src/components/SignOut/index.js","webpack:///./src/components/Navigation/index.js","webpack:///./src/components/layout.js"],"names":["MessageItem","props","_this","_Component","call","this","onToggleEditMode","setState","state","editMode","editText","message","text","onChangeEditText","event","target","value","onSaveEditText","onEditMessage","render","_this$props","authUser","onRemoveMessage","_this$state","react_default","a","createElement","type","onChange","userId","editedAt","uid","onClick","Component","MessageList","_ref","messages","map","Messages_MessageItem","key","Messages","_initFirebase","firebaseInit","firebase","onListenForMessages","loading","orderByChild","limitToLast","limit","on","snapshot","messageObject","val","messageList","Object","keys","assign","onChangeText","onCreateMessage","push","createdAt","serverValue","TIMESTAMP","preventDefault","messageSnapshot","_objectWithoutPropertiesLoose","set","remove","onNextPage","componentDidMount","componentDidUpdate","componentWillUnmount","off","_this2","Session","Consumer","Messages_MessageList","onSubmit","withFirebase","HomePage","compose","withEmailVerification","withAuthorization","components_Messages","__webpack_exports__","layout","FirebaseContext","React","createContext","config","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","Firebase","app","doCreateUserWithEmailAndPassword","email","password","auth","createUserWithEmailAndPassword","doSignInWithEmailAndPassword","signInWithEmailAndPassword","doSignInWithGoogle","signInWithPopup","googleProvider","doSignInWithFacebook","facebookProvider","doSignInWithTwitter","twitterProvider","doSignOut","signOut","doPasswordReset","sendPasswordResetEmail","doSendEmailVerification","currentUser","sendEmailVerification","url","process","GATSBY_CONFIRMATION_EMAIL_REDIRECT","doPasswordUpdate","updatePassword","onAuthUserListener","next","fallback","onAuthStateChanged","user","once","then","dbUser","roles","emailVerified","providerData","db","ref","users","initializeApp","database","ServerValue","emailAuthProvider","EmailAuthProvider","GoogleAuthProvider","FacebookAuthProvider","TwitterAuthProvider","getFirebase","__webpack_require__","d","context","context_withFirebase","react__WEBPACK_IMPORTED_MODULE_0__","AuthUserContext","n","withAuthentication","WithAuthentication","_React$Component","listener","localStorage","setItem","JSON","stringify","removeItem","_proto","prototype","parse","getItem","react__WEBPACK_IMPORTED_MODULE_0___default","_context__WEBPACK_IMPORTED_MODULE_1__","Provider","gatsby_link__WEBPACK_IMPORTED_MODULE_1__","gatsby_link__WEBPACK_IMPORTED_MODULE_1___default","loader","enqueue","LANDING","SIGN_UP","SIGN_IN","HOME","ACCOUNT","PASSWORD_FORGET","ADMIN","m","module","exports","require","default","condition","WithAuthorization","_len","arguments","length","args","Array","_key","apply","concat","navigate","ROUTES","WithEmailVerification","onSendEmailVerification","isSent","provider","providerId","includes","needsEmailVerification","disabled","Session_withAuthorization","Session_withEmailVerification","ProdPageRenderer","location","pageResources","InternalPageRenderer","json","NavigationAuth","gatsby_browser_entry","to","ROLES","SignOut","NavigationNonAuth","Navigation","Navigation_NavigationAuth","Navigation_NavigationNonAuth","Layout","Promise","all","e","t","bind","values","AppWithAuthentication","children","react","components_Navigation"],"mappings":"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","file":"component---src-pages-home-js-06e3ff14d7e9811da8ae.js","sourcesContent":["import React, { Component } from 'react';\r\n\r\nclass MessageItem extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      editMode: false,\r\n      editText: this.props.message.text,\r\n    };\r\n  }\r\n\r\n  onToggleEditMode = () => {\r\n    this.setState(state => ({\r\n      editMode: !state.editMode,\r\n      editText: this.props.message.text,\r\n    }));\r\n  };\r\n\r\n  onChangeEditText = event => {\r\n    this.setState({ editText: event.target.value });\r\n  };\r\n\r\n  onSaveEditText = () => {\r\n    this.props.onEditMessage(this.props.message, this.state.editText);\r\n\r\n    this.setState({ editMode: false });\r\n  };\r\n\r\n  render() {\r\n    const { authUser, message, onRemoveMessage } = this.props;\r\n    const { editMode, editText } = this.state;\r\n\r\n    return (\r\n      <li>\r\n        {editMode ? (\r\n          <input\r\n            type=\"text\"\r\n            value={editText}\r\n            onChange={this.onChangeEditText}\r\n          />\r\n        ) : (\r\n          <span>\r\n            <strong>{message.userId}</strong> {message.text}\r\n            {message.editedAt && <span>(Edited)</span>}\r\n          </span>\r\n        )}\r\n\r\n        {authUser.uid === message.userId && (\r\n          <span>\r\n            {editMode ? (\r\n              <span>\r\n                <button onClick={this.onSaveEditText}>Save</button>\r\n                <button onClick={this.onToggleEditMode}>Reset</button>\r\n              </span>\r\n            ) : (\r\n              <button onClick={this.onToggleEditMode}>Edit</button>\r\n            )}\r\n\r\n            {!editMode && (\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => onRemoveMessage(message.uid)}\r\n              >\r\n                Delete\r\n              </button>\r\n            )}\r\n          </span>\r\n        )}\r\n      </li>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MessageItem;\r\n","import React from 'react';\r\n\r\nimport MessageItem from './MessageItem';\r\n\r\nconst MessageList = ({\r\n  authUser,\r\n  messages,\r\n  onEditMessage,\r\n  onRemoveMessage,\r\n}) => (\r\n  <ul>\r\n    {messages.map(message => (\r\n      <MessageItem\r\n        authUser={authUser}\r\n        key={message.uid}\r\n        message={message}\r\n        onEditMessage={onEditMessage}\r\n        onRemoveMessage={onRemoveMessage}\r\n      />\r\n    ))}\r\n  </ul>\r\n);\r\n\r\nexport default MessageList;\r\n","import React, { Component } from 'react';\r\n\r\nimport { AuthUserContext } from '../Session';\r\nimport { withFirebase } from '../Firebase';\r\nimport MessageList from './MessageList';\r\n\r\nclass Messages extends Component {\r\n  _initFirebase = false;\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      text: '',\r\n      loading: false,\r\n      messages: [],\r\n      limit: 5,\r\n    };\r\n  }\r\n\r\n  firebaseInit = () => {\r\n    if (this.props.firebase && !this._initFirebase) {\r\n      this._initFirebase = true;\r\n\r\n      this.onListenForMessages();\r\n    }\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.firebaseInit();\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    this.firebaseInit();\r\n  }\r\n\r\n  onListenForMessages = () => {\r\n    this.setState({ loading: true });\r\n\r\n    this.props.firebase\r\n      .messages()\r\n      .orderByChild('createdAt')\r\n      .limitToLast(this.state.limit)\r\n      .on('value', snapshot => {\r\n        const messageObject = snapshot.val();\r\n\r\n        if (messageObject) {\r\n          const messageList = Object.keys(messageObject).map(key => ({\r\n            ...messageObject[key],\r\n            uid: key,\r\n          }));\r\n\r\n          this.setState({\r\n            messages: messageList,\r\n            loading: false,\r\n          });\r\n        } else {\r\n          this.setState({ messages: null, loading: false });\r\n        }\r\n      });\r\n  };\r\n\r\n  componentWillUnmount() {\r\n    this.props.firebase.messages().off();\r\n  }\r\n\r\n  onChangeText = event => {\r\n    this.setState({ text: event.target.value });\r\n  };\r\n\r\n  onCreateMessage = (event, authUser) => {\r\n    this.props.firebase.messages().push({\r\n      text: this.state.text,\r\n      userId: authUser.uid,\r\n      createdAt: this.props.firebase.serverValue.TIMESTAMP,\r\n    });\r\n\r\n    this.setState({ text: '' });\r\n\r\n    event.preventDefault();\r\n  };\r\n\r\n  onEditMessage = (message, text) => {\r\n    const { uid, ...messageSnapshot } = message;\r\n\r\n    this.props.firebase.message(message.uid).set({\r\n      ...messageSnapshot,\r\n      text,\r\n      editedAt: this.props.firebase.serverValue.TIMESTAMP,\r\n    });\r\n  };\r\n\r\n  onRemoveMessage = uid => {\r\n    this.props.firebase.message(uid).remove();\r\n  };\r\n\r\n  onNextPage = () => {\r\n    this.setState(\r\n      state => ({ limit: state.limit + 5 }),\r\n      this.onListenForMessages,\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const { text, messages, loading } = this.state;\r\n\r\n    return (\r\n      <AuthUserContext.Consumer>\r\n        {authUser => (\r\n          <div>\r\n            {!loading && messages && (\r\n              <button type=\"button\" onClick={this.onNextPage}>\r\n                More\r\n              </button>\r\n            )}\r\n\r\n            {loading && <div>Loading ...</div>}\r\n\r\n            {messages && (\r\n              <MessageList\r\n                authUser={authUser}\r\n                messages={messages}\r\n                onEditMessage={this.onEditMessage}\r\n                onRemoveMessage={this.onRemoveMessage}\r\n              />\r\n            )}\r\n\r\n            {!messages && <div>There are no messages ...</div>}\r\n\r\n            <form\r\n              onSubmit={event =>\r\n                this.onCreateMessage(event, authUser)\r\n              }\r\n            >\r\n              <input\r\n                type=\"text\"\r\n                value={text}\r\n                onChange={this.onChangeText}\r\n              />\r\n              <button type=\"submit\">Send</button>\r\n            </form>\r\n          </div>\r\n        )}\r\n      </AuthUserContext.Consumer>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withFirebase(Messages);\r\n","import Messages from './Messages';\r\n\r\nexport default Messages;\r\n","import React from 'react';\r\nimport { compose } from 'recompose';\r\n\r\nimport Layout from '../components/layout';\r\nimport {\r\n  withAuthorization,\r\n  withEmailVerification,\r\n} from '../components/Session';\r\nimport Messages from '../components/Messages';\r\n\r\nconst HomePageBase = () => (\r\n  <div>\r\n    <h1>Home Page</h1>\r\n    <p>The Home Page is accessible by every signed in user.</p>\r\n\r\n    <Messages />\r\n  </div>\r\n);\r\n\r\nconst condition = authUser => !!authUser;\r\n\r\nconst HomePage = compose(\r\n  withEmailVerification,\r\n  withAuthorization(condition),\r\n)(HomePageBase);\r\n\r\nexport default () => (\r\n  <Layout>\r\n    <HomePage />\r\n  </Layout>\r\n);\r\n","const config = {\r\n  apiKey: \"AIzaSyCi6P1abcy72QaTwfV7ZQHczpsJo6wOzvw\",\r\n  authDomain: \"gatsbyfb-8e6d6.firebaseapp.com\",\r\n  databaseURL: \"https://gatsbyfb-8e6d6.firebaseio.com\",\r\n  projectId: \"gatsbyfb-8e6d6\",\r\n  storageBucket: \"\",\r\n  messagingSenderId: \"921327650405\",\r\n  appId: \"1:921327650405:web:e247fd630bfd6e9a\"\r\n};\r\n\r\nclass Firebase {\r\n  constructor(app) {\r\n    app.initializeApp(config);\r\n\r\n    /* Helper */\r\n\r\n    this.serverValue = app.database.ServerValue;\r\n    this.emailAuthProvider = app.auth.EmailAuthProvider;\r\n\r\n    /* Firebase APIs */\r\n\r\n    this.auth = app.auth();\r\n    this.db = app.database();\r\n\r\n    /* Social Sign In Method Provider */\r\n\r\n    this.googleProvider = new app.auth.GoogleAuthProvider();\r\n    this.facebookProvider = new app.auth.FacebookAuthProvider();\r\n    this.twitterProvider = new app.auth.TwitterAuthProvider();\r\n  }\r\n\r\n  // *** Auth API ***\r\n\r\n  doCreateUserWithEmailAndPassword = (email, password) =>\r\n    this.auth.createUserWithEmailAndPassword(email, password);\r\n\r\n  doSignInWithEmailAndPassword = (email, password) =>\r\n    this.auth.signInWithEmailAndPassword(email, password);\r\n\r\n  doSignInWithGoogle = () =>\r\n    this.auth.signInWithPopup(this.googleProvider);\r\n\r\n  doSignInWithFacebook = () =>\r\n    this.auth.signInWithPopup(this.facebookProvider);\r\n\r\n  doSignInWithTwitter = () =>\r\n    this.auth.signInWithPopup(this.twitterProvider);\r\n\r\n  doSignOut = () => this.auth.signOut();\r\n\r\n  doPasswordReset = email => this.auth.sendPasswordResetEmail(email);\r\n\r\n  doSendEmailVerification = () =>\r\n    this.auth.currentUser.sendEmailVerification({\r\n      url: process.env.GATSBY_CONFIRMATION_EMAIL_REDIRECT,\r\n    });\r\n\r\n  doPasswordUpdate = password =>\r\n    this.auth.currentUser.updatePassword(password);\r\n\r\n  // *** Merge Auth and DB User API *** //\r\n\r\n  onAuthUserListener = (next, fallback) =>\r\n    this.auth.onAuthStateChanged(authUser => {\r\n      if (authUser) {\r\n        this.user(authUser.uid)\r\n          .once('value')\r\n          .then(snapshot => {\r\n            const dbUser = snapshot.val();\r\n\r\n            // default empty roles\r\n            if (!dbUser.roles) {\r\n              dbUser.roles = {};\r\n            }\r\n\r\n            // merge auth and db user\r\n            authUser = {\r\n              uid: authUser.uid,\r\n              email: authUser.email,\r\n              emailVerified: authUser.emailVerified,\r\n              providerData: authUser.providerData,\r\n              ...dbUser,\r\n            };\r\n\r\n            next(authUser);\r\n          });\r\n      } else {\r\n        fallback();\r\n      }\r\n    });\r\n\r\n  // *** User API ***\r\n\r\n  user = uid => this.db.ref(`users/${uid}`);\r\n\r\n  users = () => this.db.ref('users');\r\n\r\n  // *** Message API ***\r\n\r\n  message = uid => this.db.ref(`messages/${uid}`);\r\n\r\n  messages = () => this.db.ref('messages');\r\n}\r\n\r\nlet firebase;\r\n\r\nfunction getFirebase(app, auth, database) {\r\n  if (!firebase) {\r\n    firebase = new Firebase(app, auth, database);\r\n  }\r\n\r\n  return firebase;\r\n}\r\n\r\nexport default getFirebase;\r\n","import React from 'react';\r\n\r\nconst FirebaseContext = React.createContext(null);\r\n\r\nexport const withFirebase = Component => props => (\r\n  <FirebaseContext.Consumer>\r\n    {firebase => <Component {...props} firebase={firebase} />}\r\n  </FirebaseContext.Consumer>\r\n);\r\n\r\nexport default FirebaseContext;\r\n","import FirebaseContext, { withFirebase } from './context';\r\nimport getFirebase from './firebase';\r\n\r\nexport default getFirebase;\r\n\r\nexport { FirebaseContext, withFirebase };\r\n","import React from 'react';\r\n\r\nconst AuthUserContext = React.createContext(null);\r\n\r\nexport default AuthUserContext;\r\n","import React from 'react';\r\n\r\nimport AuthUserContext from './context';\r\nimport { withFirebase } from '../Firebase';\r\n\r\nconst withAuthentication = Component => {\r\n  class WithAuthentication extends React.Component {\r\n    _initFirebase = false;\r\n\r\n    constructor(props) {\r\n      super(props);\r\n\r\n      this.state = {\r\n        authUser: null,\r\n      };\r\n    }\r\n\r\n    firebaseInit = () => {\r\n      if (this.props.firebase && !this._initFirebase) {\r\n        this._initFirebase = true;\r\n\r\n        this.listener = this.props.firebase.onAuthUserListener(\r\n          authUser => {\r\n            localStorage.setItem(\r\n              'authUser',\r\n              JSON.stringify(authUser),\r\n            );\r\n            this.setState({ authUser });\r\n          },\r\n          () => {\r\n            localStorage.removeItem('authUser');\r\n            this.setState({ authUser: null });\r\n          },\r\n        );\r\n      }\r\n    };\r\n\r\n    componentDidMount() {\r\n      this.setState({\r\n        authUser: JSON.parse(localStorage.getItem('authUser')),\r\n      });\r\n\r\n      this.firebaseInit();\r\n    }\r\n\r\n    componentDidUpdate() {\r\n      this.firebaseInit();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n      this.listener && this.listener();\r\n    }\r\n\r\n    render() {\r\n      return (\r\n        <AuthUserContext.Provider value={this.state.authUser}>\r\n          <Component {...this.props} />\r\n        </AuthUserContext.Provider>\r\n      );\r\n    }\r\n  }\r\n\r\n  return withFirebase(WithAuthentication);\r\n};\r\n\r\nexport default withAuthentication;\r\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport Link, {\n  withPrefix,\n  withAssetPrefix,\n  navigate,\n  push,\n  replace,\n  navigateTo,\n  parsePath,\n} from \"gatsby-link\"\nimport PageRenderer from \"./public-page-renderer\"\nimport loader from \"./loader\"\n\nconst prefetchPathname = loader.enqueue\n\nconst StaticQueryContext = React.createContext({})\n\nfunction StaticQueryDataRenderer({ staticQueryData, data, query, render }) {\n  const finalData = data\n    ? data.data\n    : staticQueryData[query] && staticQueryData[query].data\n\n  return (\n    <React.Fragment>\n      {finalData && render(finalData)}\n      {!finalData && <div>Loading (StaticQuery)</div>}\n    </React.Fragment>\n  )\n}\n\nconst StaticQuery = props => {\n  const { data, query, render, children } = props\n\n  return (\n    <StaticQueryContext.Consumer>\n      {staticQueryData => (\n        <StaticQueryDataRenderer\n          data={data}\n          query={query}\n          render={render || children}\n          staticQueryData={staticQueryData}\n        />\n      )}\n    </StaticQueryContext.Consumer>\n  )\n}\n\nconst useStaticQuery = query => {\n  if (\n    typeof React.useContext !== `function` &&\n    process.env.NODE_ENV === `development`\n  ) {\n    throw new Error(\n      `You're likely using a version of React that doesn't support Hooks\\n` +\n        `Please update React and ReactDOM to 16.8.0 or later to use the useStaticQuery hook.`\n    )\n  }\n  const context = React.useContext(StaticQueryContext)\n  if (context[query] && context[query].data) {\n    return context[query].data\n  } else {\n    throw new Error(\n      `The result of this StaticQuery could not be fetched.\\n\\n` +\n        `This is likely a bug in Gatsby and if refreshing the page does not fix it, ` +\n        `please open an issue in https://github.com/gatsbyjs/gatsby/issues`\n    )\n  }\n}\n\nStaticQuery.propTypes = {\n  data: PropTypes.object,\n  query: PropTypes.string.isRequired,\n  render: PropTypes.func,\n  children: PropTypes.func,\n}\n\nfunction graphql() {\n  throw new Error(\n    `It appears like Gatsby is misconfigured. Gatsby related \\`graphql\\` calls ` +\n      `are supposed to only be evaluated at compile time, and then compiled away. ` +\n      `Unfortunately, something went wrong and the query was left in the compiled code.\\n\\n` +\n      `Unless your site has a complex or custom babel/Gatsby configuration this is likely a bug in Gatsby.`\n  )\n}\n\nexport {\n  Link,\n  withAssetPrefix,\n  withPrefix,\n  graphql,\n  parsePath,\n  navigate,\n  push, // TODO replace for v3\n  replace, // TODO remove replace for v3\n  navigateTo, // TODO: remove navigateTo for v3\n  StaticQueryContext,\n  StaticQuery,\n  PageRenderer,\n  useStaticQuery,\n  prefetchPathname,\n}\n","export const LANDING = '/';\r\nexport const SIGN_UP = '/signup';\r\nexport const SIGN_IN = '/signin';\r\nexport const HOME = '/home';\r\nexport const ACCOUNT = '/account';\r\nexport const PASSWORD_FORGET = '/pw-forget';\r\nexport const ADMIN = '/admin';\r\nexport const ADMIN_DETAILS = '/admin/:id';\r\n","const preferDefault = m => (m && m.default) || m\n\nif (process.env.BUILD_STAGE === `develop`) {\n  module.exports = preferDefault(require(`./public-page-renderer-dev`))\n} else if (process.env.BUILD_STAGE === `build-javascript`) {\n  module.exports = preferDefault(require(`./public-page-renderer-prod`))\n} else {\n  module.exports = () => null\n}\n","import React from 'react';\r\nimport { navigate } from 'gatsby';\r\n\r\nimport AuthUserContext from './context';\r\nimport { withFirebase } from '../Firebase';\r\nimport * as ROUTES from '../../constants/routes';\r\n\r\nconst withAuthorization = condition => Component => {\r\n  class WithAuthorization extends React.Component {\r\n    _initFirebase = false;\r\n\r\n    firebaseInit = () => {\r\n      if (this.props.firebase && !this._initFirebase) {\r\n        this._initFirebase = true;\r\n\r\n        this.listener = this.props.firebase.onAuthUserListener(\r\n          authUser => {\r\n            if (!condition(authUser)) {\r\n              navigate(ROUTES.SIGN_IN);\r\n            }\r\n          },\r\n          () => navigate(ROUTES.SIGN_IN),\r\n        );\r\n      }\r\n    };\r\n\r\n    componentDidMount() {\r\n      this.firebaseInit();\r\n    }\r\n\r\n    componentDidUpdate() {\r\n      this.firebaseInit();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n      this.listener && this.listener();\r\n    }\r\n\r\n    render() {\r\n      return (\r\n        <AuthUserContext.Consumer>\r\n          {authUser =>\r\n            condition(authUser) ? <Component {...this.props} /> : null\r\n          }\r\n        </AuthUserContext.Consumer>\r\n      );\r\n    }\r\n  }\r\n\r\n  return withFirebase(WithAuthorization);\r\n};\r\n\r\nexport default withAuthorization;\r\n","import React from 'react';\r\n\r\nimport AuthUserContext from './context';\r\nimport { withFirebase } from '../Firebase';\r\n\r\nconst needsEmailVerification = authUser =>\r\n  authUser &&\r\n  !authUser.emailVerified &&\r\n  authUser.providerData\r\n    .map(provider => provider.providerId)\r\n    .includes('password');\r\n\r\nconst withEmailVerification = Component => {\r\n  class WithEmailVerification extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n\r\n      this.state = { isSent: false };\r\n    }\r\n\r\n    onSendEmailVerification = () => {\r\n      this.props.firebase\r\n        .doSendEmailVerification()\r\n        .then(() => this.setState({ isSent: true }));\r\n    };\r\n\r\n    render() {\r\n      return (\r\n        <AuthUserContext.Consumer>\r\n          {authUser =>\r\n            needsEmailVerification(authUser) ? (\r\n              <div>\r\n                {this.state.isSent ? (\r\n                  <p>\r\n                    E-Mail confirmation sent: Check you E-Mails (Spam\r\n                    folder included) for a confirmation E-Mail.\r\n                    Refresh this page once you confirmed your E-Mail.\r\n                  </p>\r\n                ) : (\r\n                  <p>\r\n                    Verify your E-Mail: Check you E-Mails (Spam folder\r\n                    included) for a confirmation E-Mail or send\r\n                    another confirmation E-Mail.\r\n                  </p>\r\n                )}\r\n\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={this.onSendEmailVerification}\r\n                  disabled={this.state.isSent}\r\n                >\r\n                  Send confirmation E-Mail\r\n                </button>\r\n              </div>\r\n            ) : (\r\n              <Component {...this.props} />\r\n            )\r\n          }\r\n        </AuthUserContext.Consumer>\r\n      );\r\n    }\r\n  }\r\n\r\n  return withFirebase(WithEmailVerification);\r\n};\r\n\r\nexport default withEmailVerification;\r\n","import AuthUserContext from './context';\r\nimport withAuthentication from './withAuthentication';\r\nimport withAuthorization from './withAuthorization';\r\nimport withEmailVerification from './withEmailVerification';\r\n\r\nexport {\r\n  AuthUserContext,\r\n  withAuthentication,\r\n  withAuthorization,\r\n  withEmailVerification,\r\n};\r\n","export const ADMIN = 'ADMIN';\r\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\n\nimport InternalPageRenderer from \"./page-renderer\"\n\nconst ProdPageRenderer = ({ location, pageResources }) => {\n  if (!pageResources) {\n    return null\n  }\n  return React.createElement(InternalPageRenderer, {\n    location,\n    pageResources,\n    ...pageResources.json,\n  })\n}\n\nProdPageRenderer.propTypes = {\n  location: PropTypes.shape({\n    pathname: PropTypes.string.isRequired,\n  }).isRequired,\n}\n\nexport default ProdPageRenderer\n","import React from 'react';\r\n\r\nimport { withFirebase } from '../Firebase';\r\n\r\nconst SignOutButton = ({ firebase }) => (\r\n  <button\r\n    type=\"button\"\r\n    onClick={firebase ? firebase.doSignOut : () => {}}\r\n  >\r\n    Sign Out\r\n  </button>\r\n);\r\n\r\nexport default withFirebase(SignOutButton);\r\n","import React from 'react';\r\nimport { Link } from 'gatsby';\r\n\r\nimport { AuthUserContext } from '../Session';\r\nimport SignOutButton from '../SignOut';\r\nimport * as ROUTES from '../../constants/routes';\r\nimport * as ROLES from '../../constants/roles';\r\n\r\nconst Navigation = () => (\r\n  <AuthUserContext.Consumer>\r\n    {authUser =>\r\n      authUser ? (\r\n        <NavigationAuth authUser={authUser} />\r\n      ) : (\r\n        <NavigationNonAuth />\r\n      )\r\n    }\r\n  </AuthUserContext.Consumer>\r\n);\r\n\r\nconst NavigationAuth = ({ authUser }) => (\r\n  <ul>\r\n    <li>\r\n      <Link to={ROUTES.LANDING}>Landing</Link>\r\n    </li>\r\n    <li>\r\n      <Link to={ROUTES.HOME}>Home</Link>\r\n    </li>\r\n    <li>\r\n      <Link to={ROUTES.ACCOUNT}>Account</Link>\r\n    </li>\r\n    {!!authUser.roles[ROLES.ADMIN] && (\r\n      <li>\r\n        <Link to={ROUTES.ADMIN}>Admin</Link>\r\n      </li>\r\n    )}\r\n    <li>\r\n      <SignOutButton />\r\n    </li>\r\n  </ul>\r\n);\r\n\r\nconst NavigationNonAuth = () => (\r\n  <ul>\r\n    <li>\r\n      <Link to={ROUTES.LANDING}>Landing</Link>\r\n    </li>\r\n    <li>\r\n      <Link to={ROUTES.SIGN_IN}>Sign In</Link>\r\n    </li>\r\n  </ul>\r\n);\r\n\r\nexport default Navigation;\r\n","import React, { Component, Fragment } from 'react';\r\n\r\nimport Navigation from './Navigation';\r\nimport getFirebase, { FirebaseContext } from './Firebase';\r\nimport withAuthentication from './Session/withAuthentication';\r\n\r\nclass Layout extends Component {\r\n  state = {\r\n    firebase: null,\r\n  };\r\n\r\n  componentDidMount() {\r\n    const app = import('firebase/app');\r\n    const auth = import('firebase/auth');\r\n    const database = import('firebase/database');\r\n\r\n    Promise.all([app, auth, database]).then(values => {\r\n      const firebase = getFirebase(values[0]);\r\n\r\n      this.setState({ firebase });\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <FirebaseContext.Provider value={this.state.firebase}>\r\n        <AppWithAuthentication {...this.props} />\r\n      </FirebaseContext.Provider>\r\n    );\r\n  }\r\n}\r\n\r\nconst AppWithAuthentication = withAuthentication(({ children }) => (\r\n  <Fragment>\r\n    <Navigation />\r\n    <hr />\r\n    {children}\r\n  </Fragment>\r\n));\r\n\r\nexport default Layout;\r\n"],"sourceRoot":""}