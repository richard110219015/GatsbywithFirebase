(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{195:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(205),i=(n(49),n(23),n(199)),u=n(196),s=n(200);function c(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var l={email:"",password:"",error:null},m="auth/account-exists-with-different-credential",f="\n  An account with an E-Mail address to\n  this social account already exists. Try to login from\n  this account instead and associate your social accounts on\n  your personal account page.\n",p=function(e){function t(t){var n;return(n=e.call(this,t)||this).onSubmit=function(e){var t=n.state,r=t.email,a=t.password;n.props.firebase.doSignInWithEmailAndPassword(r,a).then(function(){n.setState(Object.assign({},l)),Object(i.b)(s.c)}).catch(function(e){n.setState({error:e})}),e.preventDefault()},n.onChange=function(e){var t;n.setState(((t={})[e.target.name]=e.target.value,t))},n.state=Object.assign({},l),n}return c(t,e),t.prototype.render=function(){var e=this.state,t=e.email,n=e.password,r=e.error,o=""===n||""===t;return a.a.createElement("form",{onSubmit:this.onSubmit},a.a.createElement("input",{name:"email",value:t,onChange:this.onChange,type:"text",placeholder:"Email Address"}),a.a.createElement("input",{name:"password",value:n,onChange:this.onChange,type:"password",placeholder:"Password"}),a.a.createElement("button",{disabled:o,type:"submit"},"Sign In"),r&&a.a.createElement("p",null,r.message))},t}(r.Component),d=function(e){function t(t){var n;return(n=e.call(this,t)||this).onSubmit=function(e){n.props.firebase.doSignInWithGoogle().then(function(e){return n.props.firebase.user(e.user.uid).set({username:e.user.displayName,email:e.user.email,roles:{}})}).then(function(){n.setState({error:null}),Object(i.b)(s.c)}).catch(function(e){e.code===m&&(e.message=f),n.setState({error:e})}),e.preventDefault()},n.state={error:null},n}return c(t,e),t.prototype.render=function(){var e=this.state.error;return a.a.createElement("form",{onSubmit:this.onSubmit},a.a.createElement("button",{type:"submit"},"Sign In with Google"),e&&a.a.createElement("p",null,e.message))},t}(r.Component),h=function(e){function t(t){var n;return(n=e.call(this,t)||this).onSubmit=function(e){n.props.firebase.doSignInWithFacebook().then(function(e){return n.props.firebase.user(e.user.uid).set({username:e.additionalUserInfo.profile.name,email:e.additionalUserInfo.profile.email,roles:{}})}).then(function(){n.setState({error:null}),Object(i.b)(s.c)}).catch(function(e){e.code===m&&(e.message=f),n.setState({error:e})}),e.preventDefault()},n.state={error:null},n}return c(t,e),t.prototype.render=function(){var e=this.state.error;return a.a.createElement("form",{onSubmit:this.onSubmit},a.a.createElement("button",{type:"submit"},"Sign In with Facebook"),e&&a.a.createElement("p",null,e.message))},t}(r.Component),b=function(e){function t(t){var n;return(n=e.call(this,t)||this).onSubmit=function(e){n.props.firebase.doSignInWithTwitter().then(function(e){return n.props.firebase.user(e.user.uid).set({username:e.additionalUserInfo.profile.name,email:e.additionalUserInfo.profile.email,roles:{}})}).then(function(){n.setState({error:null}),Object(i.b)(s.c)}).catch(function(e){e.code===m&&(e.message=f),n.setState({error:e})}),e.preventDefault()},n.state={error:null},n}return c(t,e),t.prototype.render=function(){var e=this.state.error;return a.a.createElement("form",{onSubmit:this.onSubmit},a.a.createElement("button",{type:"submit"},"Sign In with Twitter"),e&&a.a.createElement("p",null,e.message))},t}(r.Component),g=Object(u.c)(p),E=Object(u.c)(d),v=Object(u.c)(h),S=Object(u.c)(b),y=g,w=n(208),C=n(206),O=function(){return a.a.createElement(r.Fragment,null,a.a.createElement("h1",null,"SignIn"),a.a.createElement(y,null),a.a.createElement(E,null),a.a.createElement(v,null),a.a.createElement(S,null),a.a.createElement(C.a,null),a.a.createElement(w.a,null))};t.default=function(){return a.a.createElement(o.a,null,a.a.createElement(O,null))}},196:function(e,t,n){"use strict";n(23);var r,a=n(0),o=n.n(a),i=o.a.createContext(null),u=function(e){return function(t){return o.a.createElement(i.Consumer,null,function(n){return o.a.createElement(e,Object.assign({},t,{firebase:n}))})}},s=i,c={apiKey:"AIzaSyCi6P1abcy72QaTwfV7ZQHczpsJo6wOzvw",authDomain:"gatsbyfb-8e6d6.firebaseapp.com",databaseURL:"https://gatsbyfb-8e6d6.firebaseio.com",projectId:"gatsbyfb-8e6d6",storageBucket:"",messagingSenderId:"921327650405",appId:"1:921327650405:web:e247fd630bfd6e9a"},l=function(e){var t=this;this.doCreateUserWithEmailAndPassword=function(e,n){return t.auth.createUserWithEmailAndPassword(e,n)},this.doSignInWithEmailAndPassword=function(e,n){return t.auth.signInWithEmailAndPassword(e,n)},this.doSignInWithGoogle=function(){return t.auth.signInWithPopup(t.googleProvider)},this.doSignInWithFacebook=function(){return t.auth.signInWithPopup(t.facebookProvider)},this.doSignInWithTwitter=function(){return t.auth.signInWithPopup(t.twitterProvider)},this.doSignOut=function(){return t.auth.signOut()},this.doPasswordReset=function(e){return t.auth.sendPasswordResetEmail(e)},this.doSendEmailVerification=function(){return t.auth.currentUser.sendEmailVerification({url:{}.GATSBY_CONFIRMATION_EMAIL_REDIRECT})},this.doPasswordUpdate=function(e){return t.auth.currentUser.updatePassword(e)},this.onAuthUserListener=function(e,n){return t.auth.onAuthStateChanged(function(r){r?t.user(r.uid).once("value").then(function(t){var n=t.val();n.roles||(n.roles={}),r=Object.assign({uid:r.uid,email:r.email,emailVerified:r.emailVerified,providerData:r.providerData},n),e(r)}):n()})},this.user=function(e){return t.db.ref("users/"+e)},this.users=function(){return t.db.ref("users")},this.message=function(e){return t.db.ref("messages/"+e)},this.messages=function(){return t.db.ref("messages")},e.initializeApp(c),this.serverValue=e.database.ServerValue,this.emailAuthProvider=e.auth.EmailAuthProvider,this.auth=e.auth(),this.db=e.database(),this.googleProvider=new e.auth.GoogleAuthProvider,this.facebookProvider=new e.auth.FacebookAuthProvider,this.twitterProvider=new e.auth.TwitterAuthProvider};var m=function(e,t,n){return r||(r=new l(e,t,n)),r};n.d(t,"a",function(){return s}),n.d(t,"c",function(){return u});t.b=m},197:function(e,t,n){"use strict";var r=n(0),a=n.n(r).a.createContext(null);t.a=a},198:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(197),i=n(196);t.a=function(e){var t=function(t){var n,r;function i(e){var n;return(n=t.call(this,e)||this)._initFirebase=!1,n.firebaseInit=function(){n.props.firebase&&!n._initFirebase&&(n._initFirebase=!0,n.listener=n.props.firebase.onAuthUserListener(function(e){localStorage.setItem("authUser",JSON.stringify(e)),n.setState({authUser:e})},function(){localStorage.removeItem("authUser"),n.setState({authUser:null})}))},n.state={authUser:null},n}r=t,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r;var u=i.prototype;return u.componentDidMount=function(){this.setState({authUser:JSON.parse(localStorage.getItem("authUser"))}),this.firebaseInit()},u.componentDidUpdate=function(){this.firebaseInit()},u.componentWillUnmount=function(){this.listener&&this.listener()},u.render=function(){return a.a.createElement(o.a.Provider,{value:this.state.authUser},a.a.createElement(e,this.props))},i}(a.a.Component);return Object(i.c)(t)}},199:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(66),i=n.n(o);n.d(t,"a",function(){return i.a}),n.d(t,"b",function(){return o.navigate});n(201),n(9).default.enqueue,a.a.createContext({})},200:function(e,t,n){"use strict";n.d(t,"d",function(){return r}),n.d(t,"g",function(){return a}),n.d(t,"f",function(){return o}),n.d(t,"c",function(){return i}),n.d(t,"a",function(){return u}),n.d(t,"e",function(){return s}),n.d(t,"b",function(){return c});var r="/",a="/signup",o="/signin",i="/home",u="/account",s="/pw-forget",c="/admin"},201:function(e,t,n){var r;e.exports=(r=n(204))&&r.default||r},202:function(e,t,n){"use strict";var r=n(197),a=(n(198),n(0)),o=n.n(a),i=n(199),u=n(196),s=n(200);var c=function(e){return function(t){var n=function(n){var a,u;function c(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=n.call.apply(n,[this].concat(a))||this)._initFirebase=!1,t.firebaseInit=function(){t.props.firebase&&!t._initFirebase&&(t._initFirebase=!0,t.listener=t.props.firebase.onAuthUserListener(function(t){e(t)||Object(i.b)(s.f)},function(){return Object(i.b)(s.f)}))},t}u=n,(a=c).prototype=Object.create(u.prototype),a.prototype.constructor=a,a.__proto__=u;var l=c.prototype;return l.componentDidMount=function(){this.firebaseInit()},l.componentDidUpdate=function(){this.firebaseInit()},l.componentWillUnmount=function(){this.listener&&this.listener()},l.render=function(){var n=this;return o.a.createElement(r.a.Consumer,null,function(r){return e(r)?o.a.createElement(t,n.props):null})},c}(o.a.Component);return Object(u.c)(n)}};n(132),n(133);var l=function(e){var t=function(t){var n,a;function i(e){var n;return(n=t.call(this,e)||this).onSendEmailVerification=function(){n.props.firebase.doSendEmailVerification().then(function(){return n.setState({isSent:!0})})},n.state={isSent:!1},n}return a=t,(n=i).prototype=Object.create(a.prototype),n.prototype.constructor=n,n.__proto__=a,i.prototype.render=function(){var t=this;return o.a.createElement(r.a.Consumer,null,function(n){return function(e){return e&&!e.emailVerified&&e.providerData.map(function(e){return e.providerId}).includes("password")}(n)?o.a.createElement("div",null,t.state.isSent?o.a.createElement("p",null,"E-Mail confirmation sent: Check you E-Mails (Spam folder included) for a confirmation E-Mail. Refresh this page once you confirmed your E-Mail."):o.a.createElement("p",null,"Verify your E-Mail: Check you E-Mails (Spam folder included) for a confirmation E-Mail or send another confirmation E-Mail."),o.a.createElement("button",{type:"button",onClick:t.onSendEmailVerification,disabled:t.state.isSent},"Send confirmation E-Mail")):o.a.createElement(e,t.props)})},i}(o.a.Component);return Object(u.c)(t)};n.d(t,"a",function(){return r.a}),n.d(t,"b",function(){return c}),n.d(t,"c",function(){return l})},203:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r="ADMIN"},204:function(e,t,n){"use strict";n.r(t);n(23);var r=n(0),a=n.n(r),o=n(94);t.default=function(e){var t=e.location,n=e.pageResources;return n?a.a.createElement(o.a,Object.assign({location:t,pageResources:n},n.json)):null}},205:function(e,t,n){"use strict";n(38),n(29),n(30),n(13),n(91);var r=n(0),a=n.n(r),o=n(199),i=n(202),u=n(196),s=Object(u.c)(function(e){var t=e.firebase;return a.a.createElement("button",{type:"button",onClick:t?t.doSignOut:function(){}},"Sign Out")}),c=n(200),l=n(203),m=function(e){var t=e.authUser;return a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement(o.a,{to:c.d},"Landing")),a.a.createElement("li",null,a.a.createElement(o.a,{to:c.c},"Home")),a.a.createElement("li",null,a.a.createElement(o.a,{to:c.a},"Account")),!!t.roles[l.a]&&a.a.createElement("li",null,a.a.createElement(o.a,{to:c.b},"Admin")),a.a.createElement("li",null,a.a.createElement(s,null)))},f=function(){return a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement(o.a,{to:c.d},"Landing")),a.a.createElement("li",null,a.a.createElement(o.a,{to:c.f},"Sign In")))},p=function(){return a.a.createElement(i.a.Consumer,null,function(e){return e?a.a.createElement(m,{authUser:e}):a.a.createElement(f,null)})},d=n(198);var h=function(e){var t,r;function o(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).state={firebase:null},t}r=e,(t=o).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var i=o.prototype;return i.componentDidMount=function(){var e=this,t=Promise.all([n.e(0),n.e(13)]).then(n.t.bind(null,246,7)),r=Promise.all([n.e(0),n.e(11)]).then(n.bind(null,247)),a=Promise.all([n.e(0),n.e(12)]).then(n.bind(null,248));Promise.all([t,r,a]).then(function(t){var n=Object(u.b)(t[0]);e.setState({firebase:n})})},i.render=function(){return a.a.createElement(u.a.Provider,{value:this.state.firebase},a.a.createElement(b,this.props))},o}(r.Component),b=Object(d.a)(function(e){var t=e.children;return a.a.createElement(r.Fragment,null,a.a.createElement(p,null),a.a.createElement("hr",null),t)});t.a=h},206:function(e,t,n){"use strict";n.d(t,"a",function(){return l});n(49),n(23);var r=n(0),a=n.n(r),o=n(199),i=n(196),u=n(200);var s={email:"",error:null},c=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).onSubmit=function(e){var t=n.state.email;n.props.firebase.doPasswordReset(t).then(function(){n.setState(Object.assign({},s))}).catch(function(e){n.setState({error:e})}),e.preventDefault()},n.onChange=function(e){var t;n.setState(((t={})[e.target.name]=e.target.value,t))},n.state=Object.assign({},s),n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e=this.state,t=e.email,n=e.error,r=""===t;return a.a.createElement("form",{onSubmit:this.onSubmit},a.a.createElement("input",{name:"email",value:t,onChange:this.onChange,type:"text",placeholder:"Email Address"}),a.a.createElement("button",{disabled:r,type:"submit"},"Reset My Password"),n&&a.a.createElement("p",null,n.message))},r}(r.Component),l=function(){return a.a.createElement("p",null,a.a.createElement(o.a,{to:u.e},"Forgot Password?"))};t.b=Object(i.c)(c)},208:function(e,t,n){"use strict";n.d(t,"a",function(){return p});n(49),n(23);var r=n(0),a=n.n(r),o=n(199),i=n(196),u=n(200),s=n(203);var c={username:"",email:"",passwordOne:"",passwordTwo:"",isAdmin:!1,error:null},l="auth/email-already-in-use",m="\n  An account with this E-Mail address already exists.\n  Try to login with this account instead. If you think the\n  account is already used from one of the social logins, try\n  to sign in with one of them. Afterward, associate your accounts\n  on your personal account page.\n",f=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).onSubmit=function(e){var t=n.state,r=t.username,a=t.email,i=t.passwordOne,f=t.isAdmin,p={};f&&(p[s.a]=s.a),n.props.firebase.doCreateUserWithEmailAndPassword(a,i).then(function(e){return n.props.firebase.user(e.user.uid).set({username:r,email:a,roles:p})}).then(function(){return n.props.firebase.doSendEmailVerification()}).then(function(){n.setState(Object.assign({},c)),Object(o.b)(u.c)}).catch(function(e){e.code===l&&(e.message=m),n.setState({error:e})}),e.preventDefault()},n.onChange=function(e){var t;n.setState(((t={})[e.target.name]=e.target.value,t))},n.onChangeCheckbox=function(e){var t;n.setState(((t={})[e.target.name]=e.target.checked,t))},n.state=Object.assign({},c),n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.render=function(){var e=this.state,t=e.username,n=e.email,r=e.passwordOne,o=e.passwordTwo,i=e.isAdmin,u=e.error,s=r!==o||""===r||""===n||""===t;return a.a.createElement("form",{onSubmit:this.onSubmit},a.a.createElement("input",{name:"username",value:t,onChange:this.onChange,type:"text",placeholder:"Full Name"}),a.a.createElement("input",{name:"email",value:n,onChange:this.onChange,type:"text",placeholder:"Email Address"}),a.a.createElement("input",{name:"passwordOne",value:r,onChange:this.onChange,type:"password",placeholder:"Password"}),a.a.createElement("input",{name:"passwordTwo",value:o,onChange:this.onChange,type:"password",placeholder:"Confirm Password"}),a.a.createElement("label",null,"Admin:",a.a.createElement("input",{name:"isAdmin",type:"checkbox",checked:i,onChange:this.onChangeCheckbox})),a.a.createElement("button",{disabled:s,type:"submit"},"Sign Up"),u&&a.a.createElement("p",null,u.message))},r}(r.Component),p=function(){return a.a.createElement("p",null,"Don't have an account? ",a.a.createElement(o.a,{to:u.g},"Sign Up"))};t.b=Object(i.c)(f)}}]);
//# sourceMappingURL=component---src-pages-signin-js-4e1f4f0a7c3b3c39b707.js.map